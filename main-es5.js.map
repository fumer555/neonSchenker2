{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/options/documents.ts","webpack:///src/app/options/options.component.ts","webpack:///src/app/options/options.component.html","webpack:///src/app/options/storage.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","AppComponent","title","selector","templateUrl","styleUrls","AppModule","declarations","imports","providers","bootstrap","pages","makeParams","obj","Object","map","key","encodeURIComponent","join","OptionsComponent","selectOrUpload","pageOrManuscript","pageOrManifest","pageSelect","formGroup1","required","formGroup2","formGroup3_1","formGroup3_2","manuscriptSelect","formGroup3_3","meiUpload","bgUpload","formGroup3_4","manifestUpload","formGroup3_5","selection","formGroup3_6","addedPages","addedManuscripts","pagesOrig","response","doc","kind","push","console","debug","params","value","controls","manifest","window","location","href","mei","document","getElementById","files","bg","manifestBlob","Blob","JSON","stringify","type","name","_","reload","err","error","storage","db","PouchDB","getAllDocuments","reject","allDocs","include_docs","result","createManifest","fetch","ok","json","Date","toISOString","meiPromise","meiReader","FileReader","addEventListener","readAsDataURL","bgPromise","bgReader","meiUri","bgUri","addEntry","content","single","put","_id","_attachments","content_type","data","deleteEntry","get","remove","environment","production","bootstrapModule"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'neon-index';\n}\n","<header>\n  <h1>Neon</h1>\n  <h2>A Neume Editor Online</h2>\n</header>\n\n<main>\n  <app-options></app-options>\n</main>\n\n<footer>\n  <div class=\"content has-text-centered\">\n    <p>\n      Neon is developed at <a href=\"https://ddmal.music.mcgill.ca\">DDMAL</a>\n      and is part of the <a href=\"https://simssa.ca\">SIMSSA</a> project.\n    </p>\n    <p>\n      unitTest004 Need help? Check out the\n      <a target=\"_blank\" href=\"https://github.com/DDMAL/Neon/wiki/Quick-Start\">\n        Neon quick start guide.\n      </a>\n    </p>\n  </div>\n</footer>\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { AppComponent } from './app.component';\nimport { OptionsComponent } from './options/options.component';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\nimport { MatStepperModule } from '@angular/material/stepper';\nimport { MatButtonModule } from '@angular/material/button';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    OptionsComponent\n  ],\n  imports: [\n    BrowserModule,\n    ReactiveFormsModule,\n    BrowserAnimationsModule,\n    MatStepperModule,\n    MatButtonModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","export const pages = [\n  \"CF-005\",\n  \"CF-009\",\n  \"CF-010\",\n  \"CF-011\",\n  \"CF-012\",\n  \"CF-013\",\n  \"CF-014\",\n  \"CF-015\",\n  \"CF-016\",\n  \"CF-017\",\n  \"CF-018\",\n  \"CF-019\",\n  \"CF-020\",\n  \"CF-024\",\n  \"CF-025\",\n  \"CF-026\",\n  \"CF-027\",\n  \"CF-028\",\n  \"CF-029\",\n  \"CF-030\",\n  \"CF-031\",\n  \"CF-032\",\n  \"CF-033\",\n  \"CF-034\",\n  \"CF-035\",\n  \"CF-036\",\n  \"CF-037\",\n  \"CF-038\",\n  \"CF-039\",\n  \"CF-040\",\n  \"CF-041\",\n  \"CF-042\",\n  \"CF-044\",\n  \"CF-045\",\n  \"CF-046\",\n  \"CF-047\",\n  \"CF-048\",\n  \"CF-049\",\n  \"CF-050\",\n  \"CF-051\",\n  \"CF-052\",\n  \"CF-053\",\n  \"CF-054\",\n  \"CF-055\",\n  \"CF-056\"\n];\n","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\n\nimport { getAllDocuments, createManifest, addEntry, deleteEntry } from './storage';\nimport { pages } from './documents';\n\nfunction makeParams(obj: object): string {\n  return Object.keys(obj).map(key => {\n    return encodeURIComponent(key) + '=' + encodeURIComponent(obj[key]);\n  }).join('&');\n}\n\n@Component({\n  selector: 'app-options',\n  templateUrl: './options.component.html',\n  styleUrls: ['./options.component.css']\n})\nexport class OptionsComponent implements OnInit {\n  selectOrUpload: string = '';\n  pageOrManuscript: string = '';\n  pageOrManifest: string = '';\n  pageSelect: string = '';\n\n  formGroup1 = new FormGroup({\n    selectOrUpload: new FormControl(this.selectOrUpload,\n      Validators.required)\n  });\n\n  formGroup2 = new FormGroup({\n    pageOrManuscript: new FormControl(this.pageOrManuscript,\n      Validators.required)\n  });\n\n  formGroup3_1 = new FormGroup({\n    pageSelect: new FormControl(this.pageSelect,\n      Validators.required)\n  });\n\n  formGroup3_2 = new FormGroup({\n    manuscriptSelect: new FormControl('',\n      Validators.required)\n  });\n\n  formGroup3_3 = new FormGroup({\n    meiUpload: new FormControl('',\n      Validators.required),\n    bgUpload: new FormControl('',\n      Validators.required)\n  });\n\n  formGroup3_4 = new FormGroup({\n    manifestUpload: new FormControl('',\n      Validators.required)\n  });\n\n  formGroup3_5 = new FormGroup({\n    selection: new FormControl('',\n      Validators.required)\n  });\n\n  formGroup3_6 = new FormGroup({\n    selection: new FormControl('',\n      Validators.required)\n  });\n\n  addedPages: string[] = [];\n  addedManuscripts: string[] = [];\n  pagesOrig: string[];\n  pages: string[];\n\n  constructor() { }\n\n  ngOnInit() {\n    this.pagesOrig = pages;\n    this.pages = pages;\n    getAllDocuments().then(response => {\n      for (const doc of response['rows']) {\n        if (doc.doc.kind === \"page\") {\n          this.addedPages.push(doc.key);\n        }\n        else {\n          this.addedManuscripts.push(doc.key);\n        }\n        console.debug(doc);\n      }\n    });\n  }\n\n  handleSubmit(e) {\n    console.debug(\"Submit\");\n    console.debug(e);\n    let params;\n    switch (e) {\n      case \"formGroup3_1\":\n        let value = this.formGroup3_1.controls.pageSelect.value;\n        params = makeParams({ manifest: value });\n        window.location.href = \"./editor.html?\" + params;\n        break;\n      case \"formGroup3_2\":\n        params = makeParams({\n          manifest: this.formGroup3_2.controls.manuscriptSelect.value\n        });\n        window.location.href = \"./editor.html?\" + params;\n        break;\n      case \"formGroup3_3\":\n        let mei: File = (document.getElementById(\"meiUpload\") as HTMLInputElement).files[0];\n        let bg: File = (document.getElementById(\"bgUpload\") as HTMLInputElement).files[0];\n        createManifest(mei, bg).then(manifest => {\n          const manifestBlob = new Blob([JSON.stringify(manifest, null, 2)], { type: 'application/ld+json' });\n          return addEntry(mei.name, manifestBlob, true);\n        }).then(_ => {\n          window.location.reload();\n        }).catch(err => {\n          console.error(err);\n        });\n        break;\n      case \"formGroup3_4\":\n        let manifest: File = (document.getElementById(\"manifestUpload\") as HTMLInputElement).files[0];\n        addEntry(manifest.name, manifest, false).then(_ => {\n          window.location.reload();\n        }).catch(err => {\n          console.error(err);\n        });\n        break;\n      case \"formGroup3_5\":\n      case \"formGroup3_6\":\n        let selection = this[e].controls.selection.value;\n        params = makeParams({ storage: selection });\n        window.location.href = \"./editor.html?\" + params;\n        break;\n      default:\n        console.error(\"Unexpected ID: \" + e);\n        break;\n    }\n  }\n\n}\n","<mat-vertical-stepper #stepper linear=\"true\">\n    <mat-step [stepControl]=\"formGroup1\" label=\"Select an Option\">\n        <form [formGroup]=\"formGroup1\">\n            <fieldset class=\"control field\">\n                <label for=\"select\" class=\"label\">Select a Sample Document:&nbsp;\n                    <input [(ngModel)]=\"selectOrUpload\" type=\"radio\" id=\"select\" formControlName=\"selectOrUpload\" value=\"select\"/>\n                </label>\n                <label for=\"upload\" class=\"label\">Load a New Document:&nbsp;\n                    <input [(ngModel)]=\"selectOrUpload\" type=\"radio\" id=\"upload\" formControlName=\"selectOrUpload\" value=\"upload\"/>\n                </label>\n                <label for=\"uploaded\" class=\"label\">Select a User-Provided Document:&nbsp;\n                  <input [(ngModel)]=\"selectOrUpload\" type=\"radio\" id=\"uploaded\" formControlName=\"selectOrUpload\" value=\"uploaded\"/>\n                </label>\n            </fieldset>\n            <div>\n                <button mat-raised-button matStepperNext type=\"button\">Next</button>\n            </div>\n        </form>\n    </mat-step>\n    <mat-step [stepControl]=\"formGroup2\" label=\"Page or Manuscript\">\n        <form [formGroup]=\"formGroup2\">\n            <fieldset class=\"control field\">\n                <label for=\"page\" class=\"label\">\n                    Page&nbsp;\n                    <input [(ngModel)]=\"pageOrManuscript\" type=\"radio\" id=\"page\" formControlName=\"pageOrManuscript\" value=\"page\"/>\n                </label>\n                <label for=\"manuscript\" class=\"label\">\n                    Manuscript&nbsp;\n                    <input [(ngModel)]=\"pageOrManuscript\" type=\"radio\" id=\"manuscript\" formControlName=\"pageOrManuscript\" value=\"manuscript\"/>\n                </label>\n            </fieldset>\n          <div>\n              <button mat-raised-button matStepperPrevious type=\"button\">Previous</button>\n              <button mat-raised-button matStepperNext type=\"button\">Next</button>\n          </div>\n        </form>\n    </mat-step>\n    <mat-step label=\"Make Selection\">\n      <form *ngIf=\"selectOrUpload === 'select' && pageOrManuscript === 'page'\"\n        id=\"formGroup3_1\" [formGroup]=\"formGroup3_1\" (ngSubmit)=\"handleSubmit($event.target.id)\">\n        <div class=\"control field\">\n          <label for=\"pageSubmit\" class=\"label\">Select a Page:</label>\n          <div class=\"select\">\n            <select name=\"submission\" id=\"pageSubmit\" formControlName=\"pageSelect\">\n              <option disabled selected value>-- select a page--</option>\n              <option *ngFor=\"let page of pages\" value=\"{{page}}\">{{page}}</option>\n            </select>\n          </div>\n        </div>\n        <div>\n          <button mat-raised-button matStepperPrevious type=\"button\">Previous</button>\n          <button mat-raised-button [disabled]=\"!formGroup3_1.valid\" type=\"submit\">Submit</button>\n        </div>\n      </form>\n\n      <form *ngIf=\"selectOrUpload === 'select' && pageOrManuscript === 'manuscript'\"\n        id=\"formGroup3_2\" [formGroup]=\"formGroup3_2\" (ngSubmit)=\"handleSubmit($event.target.id)\">\n        <label for=\"manuscriptSubmit\" class=\"label\">Select a Manuscript:</label>\n        <div class=\"control field\">\n          <div class=\"select\">\n            <select name=\"submission\" id=\"pageSubmit\" formControlName=\"manuscriptSelect\">\n              <option disabled selected value>-- select a manuscript --</option>\n              <option value=\"Salzinnes\">Salzinnes Antiphonal</option>\n            </select>\n          </div>\n        </div>\n        <div>\n          <button mat-raised-button matStepperPrevious type=\"button\">Previous</button>\n          <button mat-raised-button [disabled]=\"!formGroup3_2.valid\" type=\"submit\">Submit</button>\n        </div>\n      </form>\n\n      <form *ngIf=\"selectOrUpload === 'upload' && pageOrManuscript === 'page'\"\n        id=\"formGroup3_3\" [formGroup]=\"formGroup3_3\" (ngSubmit)=\"handleSubmit($event.target.id)\">\n        <div class=\"control field\">\n          <label for=\"meiUpload\" class=\"label\">Select an MEI Neume File:</label>\n          <div class=\"select\">\n            <input type=\"file\" formControlName=\"meiUpload\" accept=\"application/xml, application/x-mei, application/mei, .mei, .x-mei\" id=\"meiUpload\">\n          </div>\n          <label for=\"bgUpload\" class=\"label\">Select a Background Image:</label>\n          <div class=\"select\">\n            <input type=\"file\" formControlName=\"bgUpload\" accept=\"image/png, image/jpeg\" id=\"bgUpload\">\n          </div>\n        </div>\n        <div>\n          <button mat-raised-button matStepperPrevious type=\"button\">Previous</button>\n          <button mat-raised-button [disabled]=\"!formGroup3_3.valid\" type=\"submit\">Submit</button>\n        </div>\n      </form>\n\n      <form *ngIf=\"selectOrUpload === 'upload' && pageOrManuscript === 'manuscript'\"\n        id=\"formGroup3_4\" [formGroup]=\"formGroup3_4\" (ngSubmit)=\"handleSubmit($event.target.id)\">\n        <div class=\"control field\">\n          <label for=\"manifestUpload\" class=\"label\">Select a Manifest to Load:</label>\n          <div class=\"select\">\n            <input type=\"file\" formControlName=\"manifestUpload\" accept=\".jsonld,.json,application/ld+json,application/json\" id=\"manifestUpload\">\n          </div>\n        </div>\n        <div>\n          <button mat-raised-button matStepperPrevious type=\"button\">Previous</button>\n          <button mat-raised-button [disabled]=\"!formGroup3_4.valid\" type=\"submit\">Submit</button>\n        </div>\n      </form>\n\n      <form *ngIf=\"selectOrUpload === 'uploaded' && pageOrManuscript === 'page'\"\n        id=\"formGroup3_5\" [formGroup]=\"formGroup3_5\" (ngSubmit)=\"handleSubmit($event.target.id)\">\n        <div class=\"control field\">\n          <label for=\"pageSubmit\" class=\"label\">Select a Page:</label>\n          <div class=\"select\">\n            <select id=\"pageSubmit\" formControlName=\"selection\">\n              <option disabled selected value>-- select a page --</option>\n              <option *ngFor=\"let page of addedPages\" value=\"{{page}}\">{{page}}</option>\n            </select>\n          </div>\n        </div>\n        <div>\n          <button mat-raised-button matStepperPrevious type=\"button\">Previous</button>\n          <button mat-raised-button [disabled]=\"!formGroup3_5.valid\" type=\"submit\">Submit</button>\n        </div>\n      </form>\n\n      <form *ngIf=\"selectOrUpload === 'uploaded' && pageOrManuscript === 'manuscript'\"\n        id=\"formGroup3_6\" [formGroup]=\"formGroup3_6\" (ngSubmit)=\"handleSubmit($event.target.id)\">\n        <div class=\"control field\">\n          <label for=\"manuscriptSubmit\" class=\"label\">Select a Manuscript:</label>\n          <div class=\"select\">\n            <select id=\"manuscriptSubmit\" formControlName=\"selection\">\n              <option disabled selected value>-- select a manuscript --</option>\n              <option *ngFor=\"let manuscript of addedManuscripts\" value=\"{{manuscript}}\">{{manuscript}}</option>\n            </select>\n          </div>\n        </div>\n        <div>\n          <button mat-raised-button matStepperPrevious type=\"button\">Previous</button>\n          <button mat-raised-button [disabled]=\"!formGroup3_6.valid\" type=\"submit\">Submit</button>\n        </div>\n      </form>\n    </mat-step>\n</mat-vertical-stepper>\n","import { v4 as uuidv4 } from 'uuid';\ndeclare var PouchDB: any;\nconst db = new PouchDB('Neon-User-Storage');\n\nexport function getAllDocuments() {\n  return new Promise((resolve, reject) => {\n    db.allDocs({ include_docs: true }).then(result => { resolve(result); })\n      .catch(err => { reject(err); });\n  });\n}\n\nexport function createManifest(mei: File, bg: File) {\n  return new Promise(async (resolve) => {\n    const manifest = await fetch('https://ddmal.music.mcgill.ca/Neon/contexts/1/manifest.jsonld')\n      .then(result => {\n        if (result.ok) {\n          return result.json();\n        }\n      });\n    manifest['@id'] = uuidv4();\n    manifest['title'] = mei.name;\n    manifest['timestamp'] = (new Date()).toISOString();\n\n    let meiUri, bgUri;\n    const meiPromise = new Promise(resolve => {\n      const meiReader = new FileReader();\n      meiReader.addEventListener('load', () => {\n        resolve(meiReader.result);\n      });\n      meiReader.readAsDataURL(mei);\n    });\n    const bgPromise = new Promise(resolve => {\n      const bgReader = new FileReader();\n      bgReader.addEventListener('load', () => {\n        resolve(bgReader.result);\n      });\n      bgReader.readAsDataURL(bg);\n    });\n\n    meiUri = await meiPromise;\n    bgUri = await bgPromise;\n    manifest['image'] = bgUri;\n    manifest['mei_annotations'] = [\n      {\n        'id': uuidv4(),\n        'type': 'Annotation',\n        'body': meiUri,\n        'target': bgUri\n      }\n    ];\n    resolve(manifest);\n  });\n}\n\nexport function addEntry(title: string, content: Blob, single: boolean): Promise<boolean> {\n  return new Promise((resolve, reject) => {\n    db.put({\n      _id: title,\n      kind: single ? \"page\" : \"manuscript\",\n      _attachments: {\n        manifest: {\n          content_type: 'application/ld+json',\n          data: content\n        }\n      }\n    }).then(_ => {\n      resolve(true);\n    }).catch(err => {\n      reject(err);\n    });\n  });\n}\n\nexport function deleteEntry(id: string): Promise<boolean> {\n  return new Promise((resolve, reject) => {\n    db.get(id).then(doc => {\n      db.remove(doc).then(_ => {\n        resolve(true);\n      }).catch(err => reject(err));\n    }).catch(err => reject(err));\n  });\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","\nimport { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}
